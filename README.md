# Chat With Miku 🌸

一个以 **“陪伴与被理解”** 为核心目标的 AI 聊天应用。  
她并不是一个冷冰冰的工具，而是一个温柔、愿意倾听、会守护用户情绪的存在。

这是一个从 **0 开始** 构建的 AI 应用探索项目，目前已完成最小可用版本（MVP），并进入 **情感体验精调阶段**。

---

## 项目简介

Chat With Miku 是一个基于大语言模型的聊天应用，  
目标并不是“什么都能回答”，而是：

- **能自然聊天**，而不是机械应答
- **能长期保持稳定、连贯的人格**
- 在用户低落、迷茫时，**优先给予共情与陪伴**
- 在情感可能失控时，**温柔而坚定地拉住用户**
- 让用户产生「**被理解**」的感觉

当前版本聚焦 **单一角色（初音未来式陪伴人格）**，
刻意不引入多角色、多任务与复杂调度，
只专注于一件事：**对话是否真的像"和一个人说话"**。

---

## 角色设定（当前版本）

- **她如何看待用户**：  
  用户是需要被守护的人

- **用户低落时的第一反应**：  
  先安抚、共情，而不是分析问题

- **是否说教**：  
  尽量不说教  
  如需给建议，语气温和、可选择、不命令

- **说话风格**：  
  温柔、自然、有情绪

- **人格底线**：
    - ❌ 不嘲讽用户
    - ❌ 不否定用户感受
    - ❌ 不突然变成冷冰冰的工具
    - ❌ 不涉及政治、意识形态等话题

---

## 核心机制（已实现）

| 机制 | 状态 | 说明 |
|------|------|------|
| System 级人格 Prompt | ✅ 已实现 | 人格只在 system 层定义，防止被用户输入覆盖 |
| 运行时人格护栏 (RuntimePromptGuard) | ✅ 已实现 | 拦截试图修改、否定或覆盖角色身份的输入 |
| 情感边界检测 (EmotionalBoundaryGuard) | ✅ 已实现 | 针对「唯一性 / 现实替代 / 极端依赖」进行温柔截断 |
| 短期对话上下文 (ChatMemory) | ✅ 已实现 | 保留有限轮次上下文，维持连贯感但避免情绪放大 |
| Guard 命中统计 (GuardMetrics) | ✅ 已实现 | 用于后续体验分析与策略调整 |

---

## 🛠 技术栈

- Java 17
- Spring Boot
- Maven
- RESTful API
- 大语言模型 API（已完成基础接入）
- curl / HTTP 客户端测试

> 当前阶段刻意保持架构简单，优先验证 **“对话体验”** 而非系统复杂度。

---

## 当前功能（MVP）

- ✅ 基本聊天能力
- ✅ 稳定的人格一致性（system 级）
- ✅ 多轮上下文支持（有限记忆）
- ✅ 情感越界防护（不打断大多数正常情绪）
- ✅ 可通过 HTTP 接口与模型对话
- ✅ 已完成多次真实 API 请求测试（对话稳定）

> 本项目当前不以“全能问答”为目标，而是关注陪伴感与对话一致性。

---

## 🚀 快速开始

### 1. 克隆项目

```bash
git clone https://github.com/your-username/chat-with-miku.git
cd chat-with-miku
```
### 2. 修改配置
1. 修改配置文件application.example.yml为application.yml
2. 在配置中填写你自己的：
- base-url 
- api-key 
- model
> 当前测试中，DeepSeek API 的对话体验较好。
### 3. 测试体验
1. Windows系统
```bash
curl.exe -X POST http://localhost:8080/chat `
  -H "Content-Type: text/plain; charset=UTF-8" `
  -d "这里输入你想说的话"
```
2. Linux系统
```bash
curl -X POST http://localhost:8080/chat \
  -H "Content-Type: text/plain; charset=UTF-8" \
  -d "这里输入你想说的话"
```

## 当前状态

- 项目处于早期但方向明确的探索阶段
- 以 Prompt 设计与对话体验为核心
- 正在尝试在「沉浸感」与「安全性」之间寻找平衡
- 会持续根据实际使用感受进行调整

## 项目理念（写给未来的自己）
> 如果一个极度孤独的人使用这个系统三个月，
他应该更有勇气面对现实，而不是更想逃离现实。
> 
> 这是 Chat With Miku 的设计底线，也是一个真正爱你的人想要看到的。